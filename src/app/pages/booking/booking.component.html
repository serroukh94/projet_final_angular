<div class="booking-page">
  <a routerLink="/" class="back-link">← Retour à l'accueil</a>
  <h1>Réserver une voiture</h1>
  <p class="subtitle">Remplissez les informations ci-dessous pour votre réservation.</p>

  <form class="booking-form">
    <div class="form-group">
      <label for="fullName">Nom complet</label>
      <input
        id="fullName"
        type="text"
        placeholder="Ex: Jean Dupont"
        [(ngModel)]="booking.fullName"
        name="fullName"
      />
    </div>

    <div class="form-group">
      <label for="email">Adresse email</label>
      <input
        id="email"
        type="email"
        placeholder="Ex: jean.dupont@gmail.com"
        [(ngModel)]="booking.email"
        name="email"
      />
    </div>

    <div class="form-group">
      <label for="carModel">Modèle de voiture</label>
      <select
        id="carModel"
        [(ngModel)]="booking.carModel"
        name="carModel"
        (change)="onCarModelChange()"
      >
        <option value="">-- Sélectionnez une voiture --</option>
        <option *ngFor="let car of allCars" [value]="car.name">{{ car.name }} - {{ car.pricePerDay }}€/jour</option>
      </select>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="startDate">Date de début</label>
        <input
          id="startDate"
          type="date"
          [(ngModel)]="booking.startDate"
          name="startDate"
          (change)="calculatePrice()"
        />
      </div>

      <div class="form-group">
        <label for="endDate">Date de fin</label>
        <input
          id="endDate"
          type="date"
          [(ngModel)]="booking.endDate"
          name="endDate"
          [min]="booking.startDate"
          (change)="calculatePrice()"
        />
      </div>
    </div>

    <div *ngIf="numberOfDays > 0 && selectedCar" class="price-summary">
      <p><strong>Durée :</strong> {{ numberOfDays }} jour(s)</p>
      <p><strong>Prix par jour :</strong> {{ selectedCar.pricePerDay }} €</p>
      <p class="total"><strong>Prix total :</strong> {{ totalPrice }} €</p>
    </div>

    <div class="form-group">
      <label for="message">Remarques (optionnel)</label>
      <textarea
        id="message"
        rows="3"
        placeholder="Ex: Besoin d’un siège bébé, livraison à domicile, etc."
        [(ngModel)]="booking.message"
        name="message"
      ></textarea>
    </div>

    <button type="button" class="btn-submit" (click)="submitForm()">Confirmer la réservation</button>
  </form>

  <p *ngIf="successMessage" class="success">{{ successMessage }}</p>
</div>
